<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>D&D Encounter Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=MedievalSharp&display=swap" rel="stylesheet">
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background-color: #1e1c1a;
  color: #f5e6c8;
  font-family: 'Georgia', serif;
}

.container {
  width: 95%;
  max-width: 1200px;
  margin: 10px auto;
  background: #2d2723;
  padding: 15px;
  border-radius: 15px;
  box-shadow: 0 0 20px #000000aa;
  border: 3px solid #b08d57;
}

h1, h2 {
  font-family: 'Cinzel', serif;
  text-align: center;
  color: #f0d67c;
  text-shadow: 2px 2px 4px #000;
  margin: 10px 0;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
  table-layout: fixed;
  background: #3b322d;
  color: #f5e6c8;
  border: 2px solid #b08d57;
  box-shadow: inset 0 0 5px #000;
}

th, td {
  border: 1px solid #b08d57;
  padding: 6px 4px;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

th {
  background: linear-gradient(to bottom, #5b473a, #3b322d);
  color: #f0d67c;
  font-family: 'MedievalSharp', cursive;
  text-shadow: 1px 1px 2px #000;
}

td input {
  width: 60px;
  box-sizing: border-box;
  text-align: center;
}

td button {
  display: block;
  width: 80%;
  margin: 2px auto;
  background: #8b5e3c;
  color: #f5e6c8;
  border: 1px solid #b08d57;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
}

td button:hover {
  background: #b08d57;
  color: #3b322d;
}

select, input {
  background: #5b473a;
  color: #f5e6c8;
  border: 1px solid #b08d57;
  border-radius: 4px;
  padding: 4px;
}

.dice {
  text-align: center;
  margin-bottom: 15px;
}

.dice button {
  background: #8b5e3c;
  color: #f5e6c8;
  border: 1px solid #b08d57;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
}

.dice button:hover {
  background: #b08d57;
  color: #3b322d;
}

.d20 {
  font-family: 'MedievalSharp', cursive;
  display: inline-block;
  background: #8b5e3c;
  color: #f5e6c8;
  padding: 6px 12px;
  border-radius: 50%;
  border: 2px solid #b08d57;
  margin-right: 6px;
  text-shadow: 1px 1px 2px #000;
}

.timers {
  text-align: center;
  margin: 20px 0;
}

.timer {
  background: #3b322d;
  border: 2px solid #b08d57;
  border-radius: 10px;
  padding: 10px;
  margin: 10px auto;
  display: inline-block;
  width: 280px;
  color: #f5e6c8;
  box-shadow: inset 0 0 8px #000;
}
</style>
</head>
<body>
<div class="container">
<h1>üó°Ô∏è D&D Encounter Dashboard üõ°Ô∏è</h1>

<!-- Players -->
<h2>Players</h2>
<select id="playerSelect"></select>
<button id="addPlayerBtn">Add Player</button>
<table id="playerTable">
  <thead>
    <tr>
      <th>Name</th><th>HP</th><th>AC</th><th>Attack</th><th>Current HP</th>
      <th>Minor 1</th><th>Minor 2</th>
      <th>Major 1</th><th>Major 2</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- Enemies -->
<h2>Enemies</h2>
<select id="enemySelect"></select>
<button id="addEnemyBtn">Add Enemy</button>
<table id="enemyTable">
  <thead>
    <tr>
      <th>Name</th><th>HP</th><th>AC</th><th>Attack</th><th>Current HP</th>
      <th>Minor 1</th><th>Minor 2</th>
      <th>Major 1</th><th>Major 2</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- Dice Roller -->
<h2>Dice Roller</h2>
<div class="dice">
  <span class="d20">üé≤</span>
  <label>Dice:
    <select id="diceType">
      <option value="6">D6</option>
      <option value="8">D8</option>
      <option value="10">D10</option>
      <option value="12">D12</option>
      <option value="20">D20</option>
    </select>
  </label>
  <button id="rollDiceBtn">Roll</button>
  <span id="diceResult"></span>
</div>

<!-- Timers -->
<h2>Timers</h2>
<div class="timers" id="timersContainer"></div>

</div>

<script>
// --- Entities ---
const playersList = [
  {name:'Curtis Johnson', hp:5, ac:14, attack:4},
  {name:'Millie Johnson', hp:5, ac:12, attack:3},
  {name:'Felcity Weatherhead', hp:5, ac:12, attack:3},
  {name:'Jesscia Weatherhead', hp:5, ac:12, attack:3}
];
const monstersList = [
  {name:'Rat', hp:2, ac:10, attack:1},
  {name:'Giant Rat', hp:3, ac:10, attack:1},
  {name:'King Rat', hp:2, ac:10, attack:1},
  {name:'Goblin', hp:5, ac:12, attack:2},
  {name:'Skeleton', hp:4, ac:13, attack:3}
];
const minorInjuries = ["Scratched","Bruised","Fatigued","Minor Cut","Sprain"];
const majorInjuries = ["Crippled Arm L","Crippled Arm R","Blinded Eye","Crippled Leg L","Crippled Leg R","Crushed Chest"];

// --- Storage ---
let players = JSON.parse(localStorage.getItem('players')||'[]');
let enemies = JSON.parse(localStorage.getItem('enemies')||'[]');
function saveData(){ localStorage.setItem('players',JSON.stringify(players)); localStorage.setItem('enemies',JSON.stringify(enemies)); }

// --- Populate selects ---
function populateSelects(){
  const pSelect=document.getElementById('playerSelect'); pSelect.innerHTML='';
  playersList.forEach((p,i)=>{ const opt=document.createElement('option'); opt.value=i; opt.textContent=p.name; pSelect.appendChild(opt); });
  const eSelect=document.getElementById('enemySelect'); eSelect.innerHTML='';
  monstersList.forEach((m,i)=>{ const opt=document.createElement('option'); opt.value=i; opt.textContent=m.name; eSelect.appendChild(opt); });
}

// --- Render Tables ---
function renderTable(){
  function createInjuryCell(entity,type,slot){
    const td=document.createElement('td'); td.textContent=entity[type][slot]||'';
    const btn=document.createElement('button');
    btn.textContent=entity[type][slot]?'Remove':'Add';
    btn.addEventListener('click',()=>{
      if(entity[type][slot]) entity[type][slot]='';
      else entity[type][slot]=(type==='minor'?minorInjuries:majorInjuries)[Math.floor(Math.random()*(type==='minor'?minorInjuries.length:majorInjuries.length))];
      saveData(); renderTable();
    });
    td.appendChild(btn); return td;
  }

  const playerTbody=document.querySelector('#playerTable tbody'); playerTbody.innerHTML='';
  players.forEach((p,i)=>{
    const row=document.createElement('tr');
    ['name','hp','ac','attack'].forEach(k=>{ const td=document.createElement('td'); td.textContent=p[k]; row.appendChild(td); });
    const hpTd=document.createElement('td'); const hpInput=document.createElement('input');
    hpInput.type='number'; hpInput.value=p.currentHp;
    hpInput.addEventListener('input',()=>{p.currentHp=parseInt(hpInput.value)||0;saveData();});
    hpTd.appendChild(hpInput); row.appendChild(hpTd);
    for(let j=0;j<2;j++) row.appendChild(createInjuryCell(p,'minor',j));
    for(let j=0;j<2;j++) row.appendChild(createInjuryCell(p,'major',j));
    const actTd=document.createElement('td');
    const remBtn=document.createElement('button'); remBtn.textContent='Remove';
    remBtn.addEventListener('click',()=>{players.splice(i,1);saveData();renderTable();});
    actTd.appendChild(remBtn); row.appendChild(actTd);
    playerTbody.appendChild(row);
  });

  const enemyTbody=document.querySelector('#enemyTable tbody'); enemyTbody.innerHTML='';
  enemies.forEach((e,i)=>{
    const row=document.createElement('tr');
    ['name','hp','ac','attack'].forEach(k=>{ const td=document.createElement('td'); td.textContent=e[k]; row.appendChild(td); });
    const hpTd=document.createElement('td'); const hpInput=document.createElement('input');
    hpInput.type='number'; hpInput.value=e.currentHp;
    hpInput.addEventListener('input',()=>{e.currentHp=parseInt(hpInput.value)||0;saveData();});
    hpTd.appendChild(hpInput); row.appendChild(hpTd);
    for(let j=0;j<2;j++) row.appendChild(createInjuryCell(e,'minor',j));
    for(let j=0;j<2;j++) row.appendChild(createInjuryCell(e,'major',j));
    const actTd=document.createElement('td');
    const remBtn=document.createElement('button'); remBtn.textContent='Remove';
    remBtn.addEventListener('click',()=>{enemies.splice(i,1);saveData();renderTable();});
    actTd.appendChild(remBtn); row.appendChild(actTd);
    enemyTbody.appendChild(row);
  });
}

// --- Add buttons ---
document.getElementById('addPlayerBtn').addEventListener('click',()=>{
  const idx=parseInt(document.getElementById('playerSelect').value); const t=playersList[idx];
  players.push({...t,currentHp:t.hp,minor:['',''],major:['','']}); saveData(); renderTable();
});
document.getElementById('addEnemyBtn').addEventListener('click',()=>{
  const idx=parseInt(document.getElementById('enemySelect').value); const t=monstersList[idx];
  enemies.push({...t,currentHp:t.hp,minor:['',''],major:['','']}); saveData(); renderTable();
});

// --- Dice Roller ---
document.getElementById('rollDiceBtn').addEventListener('click',()=>{
  const sides=parseInt(document.getElementById('diceType').value);
  document.getElementById('diceResult').textContent=`Result: ${Math.floor(Math.random()*sides)+1}`;
});

// --- Timers ---
let timers = [
  {id:1, duration:0, end:null},
  {id:2, duration:0, end:null},
  {id:3, duration:0, end:null}
];

function renderTimers(){
  const container=document.getElementById('timersContainer');
  container.innerHTML='';
  timers.forEach((t)=>{
    const div=document.createElement('div');
    div.className='timer';
    div.innerHTML=`
      <h3>Timer ${t.id}</h3>
      <label>Minutes: <input type="number" id="dur${t.id}" min="0" value="${t.duration||0}"></label><br>
      <button id="start${t.id}">Start</button>
      <button id="reset${t.id}">Reset</button>
      <div id="display${t.id}" style="margin-top:8px;font-size:20px;">00:00</div>
    `;
    container.appendChild(div);
  });

  timers.forEach((t)=>{
    document.getElementById(`start${t.id}`).addEventListener('click',()=>{
      const mins=parseInt(document.getElementById(`dur${t.id}`).value)||0;
      t.duration=mins;
      t.end=Date.now()+mins*60*1000;
      updateTimers();
    });
    document.getElementById(`reset${t.id}`).addEventListener('click',()=>{
      t.end=null;
      document.getElementById(`display${t.id}`).textContent='00:00';
    });
  });
}

function updateTimers(){
  timers.forEach((t)=>{
    if(!t.end)return;
    const remaining=Math.max(0,t.end-Date.now());
    const mins=Math.floor(remaining/60000);
    const secs=Math.floor((remaining%60000)/1000);
    const display=document.getElementById(`display${t.id}`);
    if(display) display.textContent=`${String(mins).padStart(2,'0')}:${String(secs).padStart(2,'0')}`;
    if(remaining<=0)t.end=null;
  });
}
setInterval(updateTimers,1000);

// --- Init ---
populateSelects(); renderTable(); renderTimers();
</script>
</body>
</html>





